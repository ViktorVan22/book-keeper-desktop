诚然，单元测试有很多优点，但不管怎么说，它确实增加了额外的工作量。那么这时候我们也需要考虑一些测试策略，并不是所有函数或者组件都需要被测试，好钢要用在刀刃上。

单元测试测试策略一般为：

- 纯逻辑层
  对于配置文件，如 constants.ts 这样的文件，选择不测试。
  reducer 层的逻辑代码要求 100% 覆盖。
  action 层，如果构造 action 的方法有些转换逻辑，可以测；否则可不测。
  services 层逻辑代码要求 100% 覆盖。
- 组件层
  纯 UI 层一般不测，如之前的 Icon 组件，它只是负责显示，没有任何逻辑。
  带有逻辑的组件中分支渲染逻辑必测、事件、交互调用要求 100% 覆盖。
  相对来说，组件测试比一般的单元测试成本更高，主要是组件事件交互比较复杂，而且我们需要为组件补全它所依赖的上层组件配置等等。还有一种情况是，有些组件是没法测试的，比如图表组件，最后渲染出来的是一堆 svg 节点，我们没法（或者说很难）去测试这些线是否绘制正确。

但依托以 Hook 特性，我们可以将组件中的逻辑抽离到自定义的 Hook 中，使它本身只返回组件渲染所需的数据。如此我们就可以剥离掉 DOM 的渲染，然后只需去测试这个 Hook 工作是否如我们所愿即可。Hook 测试就是单纯的逻辑测试了，要测试 Hook，我们需要借助 react-hooks-testing-library。毕竟 Hook 不是一般的函数。
